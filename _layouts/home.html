---
layout: base
---

{% include header.html type="page" %}

<main class="container-md">
  <div class="row">
    <div class="col-xl-8 offset-xl-2 col-lg-10 offset-lg-1">
      {{ content }}
    </div>
  </div>

  {% assign weekly_posts = site.posts | where: "tags", "weekly-whats-up" %}
  {% assign regular_posts = "" | split: "" %}
  {% for post in site.posts %}
    {% unless post.tags contains "weekly-whats-up" %}
      {% assign regular_posts = regular_posts | push: post %}
    {% endunless %}
  {% endfor %}

  <div class="row">
    <!-- Regular Posts - Main Column -->
    <div class="col-lg-8">
      <h3>Latest Posts</h3>
      <!-- role="list" needed so that `list-style: none` in Safari doesn't remove the list semantics -->
      <ul class="posts-list list-unstyled" role="list">
        {% for post in regular_posts limit: 10 %}
        <li class="post-preview">
          <article>

            {%- capture thumbnail -%}
              {% if post.thumbnail-img %}
                {{ post.thumbnail-img }}
              {% elsif post.cover-img %}
                {% if post.cover-img.first %}
                  {{ post.cover-img[0].first.first }}
                {% else %}
                  {{ post.cover-img }}
                {% endif %}
              {% else %}
              {% endif %}
            {% endcapture %}
            {% assign thumbnail=thumbnail | strip %}

            {% if site.feed_show_excerpt == false %}
            {% if thumbnail != "" %}
            <div class="post-image post-image-normal">
              <a href="{{ post.url | absolute_url }}" aria-label="Thumbnail">
                <img src="{{ thumbnail | absolute_url }}" alt="Post thumbnail">
              </a>
            </div>
            {% endif %}
            {% endif %}

            <a href="{{ post.url | absolute_url }}">
              <h2 class="post-title">{{ post.title | strip_html }}</h2>

              {% if post.subtitle %}
                <h3 class="post-subtitle">
                {{ post.subtitle | strip_html }}
                </h3>
              {% endif %}
            </a>

            {% if post.author %}
              <span>By <strong>{{ post.author | strip_html }}</strong></span>
            {% endif %}
            <p class="post-meta">
              {% assign date_format = site.date_format | default: "%B %-d, %Y" %}
              Posted on {{ post.date | date: date_format }}
            </p>

            {% if thumbnail != "" %}
            <div class="post-image post-image-small">
              <a href="{{ post.url | absolute_url }}" aria-label="Thumbnail">
                <img src="{{ thumbnail | absolute_url }}" alt="Post thumbnail">
              </a>
            </div>
            {% endif %}

            {% unless site.feed_show_excerpt == false %}
            {% if thumbnail != "" %}
            <div class="post-image post-image-short">
              <a href="{{ post.url | absolute_url }}" aria-label="Thumbnail">
                <img src="{{ thumbnail | absolute_url }}" alt="Post thumbnail">
              </a>
            </div>
            {% endif %}

            <div class="post-entry">
              {% assign excerpt_length = site.excerpt_length | default: 50 %}
              {{ post.excerpt | strip_html | truncatewords: excerpt_length }}
              {% assign excerpt_word_count = post.excerpt | number_of_words %}
              {% if post.content != post.excerpt or excerpt_word_count > excerpt_length %}
                <a href="{{ post.url | absolute_url }}" class="post-read-more">[Read&nbsp;More]</a>
              {% endif %}
            </div>
            {% endunless %}

            {% if site.feed_show_tags != false and post.tags.size > 0 %}
            <div class="blog-tags">
              <span>Tags:</span>
              <!-- role="list" needed so that `list-style: none` in Safari doesn't remove the list semantics -->
              <ul class="d-inline list-inline" role="list">
                {% for tag in post.tags %}
                <li class="list-inline-item">
                  <a href="{{ '/tags' | absolute_url }}#{{- tag -}}">{{- tag -}}</a>
                </li>
                {% endfor %}
              </ul>
            </div>
            {% endif %}

          </article>
        </li>
        {% endfor %}
      </ul>

      {% comment %}
      Pagination removed - showing latest regular posts directly
      {% endcomment %}
    </div>

    <!-- Weekly Posts - Sidebar -->
    <div class="col-lg-4">
      <div class="weekly-posts-sidebar">
        <h4 class="text-muted">Weekly What's Up</h4>
        <ul class="list-unstyled weekly-posts-list" role="list">
          {% for post in weekly_posts limit: 8 %}
          <li class="weekly-post-item mb-3">
            <a href="{{ post.url | absolute_url }}" class="weekly-post-link">
              <h6 class="weekly-post-title mb-1">{{ post.title | strip_html }}</h6>
              <small class="text-muted">
                {% assign date_format = "%b %-d, %Y" %}
                {{ post.date | date: date_format }}
              </small>
            </a>
          </li>
          {% endfor %}
        </ul>
        {% if weekly_posts.size > 8 %}
        <p class="text-center">
          <a href="{{ '/tags' | absolute_url }}#weekly-whats-up" class="text-muted">
            <small>View all weekly posts â†’</small>
          </a>
        </p>
        {% endif %}
      </div>
    </div>
  </div>
</main>
